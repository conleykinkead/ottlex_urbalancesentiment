[
  {
    "objectID": "final-project.html",
    "href": "final-project.html",
    "title": "Mapping urban-rural balance sentiment in Lexington/Fayette County, KY",
    "section": "",
    "text": "This project analyzes and maps urban-rural balance sentiment in Lexington/Fayette County, Kentucky using data from CivicLex’s On The Table (OTT) survey data, which was conducted in the spring of 2022.\nSurvey participants completed both open response and multiple choice questions covering a variety of topics relevant to Lexington. The urban-rural balance topic is significant to Lexington as the city continues to evaluate making changes to its Urban Service Area and is economically and culturally intertwined with the thoroughbred horse industry, but is also growing in population and other industry within the city’s urban core. A sentiment analysis of urban-rural balance survey response data can shed light on how residents feel, ranging from very negative to very positive, about Lexington/Fayette County’s management of and balance between urban and rural land here. In this project, sentiment on this topic is measured and then mapped based on where respondents live. I also delve into the content of responses to look at important words or phrases in the open responses.\nImportantly, participation in OTT was entirely voluntary, so the data and the following results shouldn’t be assumed to be representative of Lexington/Fayette County residents at large. CivicLex determined the city council districts that respondents are likely to reside in based on their self-identified neighborhood of residence; thus the following analysis shows “likely council district” instead of “council district”.\nAll data and files associated with this analysis can be found on the project Github repository."
  },
  {
    "objectID": "final-project.html#prepping-for-analysis",
    "href": "final-project.html#prepping-for-analysis",
    "title": "Mapping urban-rural balance sentiment in Lexington/Fayette County, KY",
    "section": "Prepping for analysis",
    "text": "Prepping for analysis\n\nInstalling packages\n\n\nCode\ninstall.packages(\"tidyverse\")\ninstall.packages(\"tidytext\")\ninstall.packages(\"janitor\")\ninstall.packages(\"fs\")\ninstall.packages(\"here\")\ninstall.packages(\"sf\")\ninstall.packages(\"tmap\")\ninstall.packages(\"RColorBrewer\")\ninstall.packages(\"quanteda\")\ninstall.packages(\"quanteda.textplots\")\ninstall.packages(\"quanteda.textstats\")\ninstall.packages(\"textdata\")\n\n\n\n\nLoading packages\n\n\nCode\nlibrary(tidyverse)\nlibrary(janitor)\nlibrary(fs)\nlibrary(here)\nlibrary(tidytext)\nlibrary(sf)\nlibrary(tmap)\nlibrary(RColorBrewer)\nlibrary(quanteda)\nlibrary(quanteda.textplots)\nlibrary(quanteda.textstats)\nlibrary(textdata)"
  },
  {
    "objectID": "final-project.html#ott-data",
    "href": "final-project.html#ott-data",
    "title": "Mapping urban-rural balance sentiment in Lexington/Fayette County, KY",
    "section": "OTT data",
    "text": "OTT data\n\nDownloading CivicLex On The Table (OTT) data\n\n\nCode\ndir_create(here(\"data\", \"zipfiles\"))\ndownload.file(\n  \"https://www.ottlex.org/s/OTT-2022-Raw-Data.zip\",\n  destfile = here(\"data\", \"zipfiles\", \"ott.zip\")\n  )\n\n\n\n\nCode\ndir_create(here(\"data\", \"ott\")) \nunzip(\n  zipfile = here(\"data\", \"zipfiles\", \"ott.zip\"),\n  junkpaths = T,\n  exdir = here(\"data\", \"ott\")\n)\n\n\n\n\nTidying OTT data\n\n\nCode\nott_data <- read_csv(here(\"data\", \"ott\", \"OTT Raw Data-Raw Data Grid.csv\")) |> \n  clean_names()\n\n\n\n\nSelecting the required data\n\n\nCode\nott_data |>\n  select(\n    ott_raw_data_response,\n    likely_council_district,\n    ur_balance_or\n    )|>\n  pivot_longer(\n    ur_balance_or,\n    values_to = \"response\"  \n) |>\n  mutate(\n    response = str_squish(response)\n  ) |>\n  filter(\n    str_length(response) > 0\n  ) |>\n  mutate(\n    docid = str_c(ott_raw_data_response, sep = \"_\")\n  ) -> ur_balance_tidy"
  },
  {
    "objectID": "final-project.html#sentiment-analysis-of-lexingtons-urban-rural-balance",
    "href": "final-project.html#sentiment-analysis-of-lexingtons-urban-rural-balance",
    "title": "Mapping urban-rural balance sentiment in Lexington/Fayette County, KY",
    "section": "Sentiment analysis of Lexington’s urban-rural balance",
    "text": "Sentiment analysis of Lexington’s urban-rural balance\n\nCombining urban-rural balance open responses by likely council district\n\n\nCode\nur_balance_tidy |>\n    filter(\n    str_length(likely_council_district) < 3\n    ) |>\n  group_by(likely_council_district) |>\n  summarise(text = str_flatten(response, collapse = \" \")) -> district_response\n\n\n\n\nMeasuring urban-rural balance sentiment by likely council district\n\nTokenizing responses\n\n\nCode\ndistrict_response |>\n  unnest_tokens(\n    word,\n    text,\n    token = \"words\"\n  ) -> district_response_tokens\n\n\n\n\nJoining tokens with AFFIN lexicon\nAFFIN is a dataset containing a lexicon of English words rated -5 to +5 based on their sentiment, with -5 being the most negative, 0 being neutral, and +5 being the most positive.\n\n\nCode\ndistrict_response_tokens |>\n  mutate(\n    word_location = row_number()\n  ) |>\n  inner_join(\n    get_sentiments(\"afinn\")\n  ) -> ur_sentiments\n\n\n\n\nGrouping and averaging sentiment by likely council district\n\n\nCode\nur_sentiments |>\n  group_by(likely_council_district) |>\n  summarise(\n    sentiment = mean(value)\n  ) -> ur_district_sentiment\n\n\n\n\nPlot of urban-rural balance sentiment by likely council district\n\n\nCode\nur_district_sentiment |>\n  ggplot(aes(likely_council_district, sentiment)) +\n  geom_point()\n\n\n\n\n\nRough urban-rural balance sentiment for likely council districts plot to begin visualizing the data."
  },
  {
    "objectID": "final-project.html#mapping-sentiment-by-likely-council-district",
    "href": "final-project.html#mapping-sentiment-by-likely-council-district",
    "title": "Mapping urban-rural balance sentiment in Lexington/Fayette County, KY",
    "section": "Mapping sentiment by likely council district",
    "text": "Mapping sentiment by likely council district\n\nAdding council district spatial data\n\nDownloading council district GeoJSON from Lexington’s Data Hub\n\n\nCode\nlex_councils <- read_sf(\"https://services1.arcgis.com/Mg7DLdfYcSWIaDnu/arcgis/rest/services/Council_District/FeatureServer/0/query?outFields=*&where=1%3D1&f=geojson\")\n\n\n\n\n\nJoining council district spatial df with sentiment analysis df\n\n\nCode\nur_district_sentiment |>\n  mutate(\n    DISTRICT = as.numeric(likely_council_district)\n  ) -> ur_district_sentiment_dbl\n\n\n\n\nCode\ndistrict_sentiment <-\n  merge(ur_district_sentiment_dbl,lex_councils)\n\n\n\nMaking merged df a spatial df\n\n\nCode\ndistrict_sentiment_sf = st_as_sf(district_sentiment)"
  },
  {
    "objectID": "final-project.html#map-of-urban-rural-balance-sentiment",
    "href": "final-project.html#map-of-urban-rural-balance-sentiment",
    "title": "Mapping urban-rural balance sentiment in Lexington/Fayette County, KY",
    "section": "Map of urban-rural balance sentiment",
    "text": "Map of urban-rural balance sentiment\n\n\nCode\ntm_shape(district_sentiment_sf) +\n  tm_polygons(col = \"sentiment\", palette = \"Blues\") +\n  tm_credits(\"Data sources: CivicLex; LFUCG\", size = 0.9, position = c(\"left\",\"top\")) +\n  tm_credits(\"Author: Conley Kinkead\", size = 0.9, position = c(\"left\",\"top\")) +\n  tm_scale_bar(position = c(\"right\", \"bottom\")) +\n  tm_layout(main.title = \"Urban-rural balance sentiment by likely council district\",\n            fontface = \"italic\",\n            fontfamily = \"serif\",\n            main.title.size = 1.5) +\n  tm_legend(\n  legend.title.size = 1.2,\n  legend.title.fontface = \"bold\",\n  legend.text.size = 0.9,\n  legend.bg.color = \"white\",\n  legend.position = c(\"left\", \"bottom\"))\n\n\n\n\n\nUrban-rural balance sentiment by likely council district map. A higher sentiment value represents a more positive sentiment.\n\n\n\n\n\nResults\nThis map shows that residents of all council districts have a positive sentiment regarding Lexington’s urban-rural balance, but at varying degrees. AFINN ratings range from -5 (very negative) to +5 (very positive), with 0 indicating a neutral sentiment. A lower sentiment score on this map indicates a less positive sentiment, and a higher score indicates a more positive sentiment.\nThe results showing that the OTT participants who are likely residents of council district 12 have the least positive sentiment regarding Lexington’s urban-rural balance is interesting. District 12 covers the primarily agricultural area of Lexington/Fayette County, wrapping around the city’s central area, and largely overlapping with the Rural Service Area."
  },
  {
    "objectID": "final-project.html#a-little-more-analysis-urban-rural-balance-response-content-analysis-using-quanteda",
    "href": "final-project.html#a-little-more-analysis-urban-rural-balance-response-content-analysis-using-quanteda",
    "title": "Mapping urban-rural balance sentiment in Lexington/Fayette County, KY",
    "section": "A little more analysis: Urban-rural balance response content analysis using quanteda",
    "text": "A little more analysis: Urban-rural balance response content analysis using quanteda\n\n\nCode\nur_balance_tidy |>\n  corpus(\n    docid_field = \"docid\",\n    text_field = \"response\"\n  ) -> ur_balance_corpus\n\n\n\nCorpus to tokens\n\n\nCode\nur_balance_corpus |>\n  tokens(remove_punct = T) |>\n  tokens_tolower() |>\n  tokens_remove(pattern = stopwords()) |>\n  tokens_compound(pattern = list(c(\"man\", \"o\", \"war\"), c(\"horse\", \"capital\"))) -> ur_balance_tokens\n\n\n\n\nTokens to DFM\n\n\nCode\nur_balance_tokens |>\n  dfm() -> ur_balance_dfm\n\n\n\n\nKeyness plot of likely council district 12 urban-rural balance response content versus all others\n\n\nCode\nur_balance_dfm |>\n  dfm_group(groups = ur_balance_dfm$likely_council_district) |>\n  textstat_keyness(target = \"12\") |>\n  textplot_keyness()\n\n\n\n\n\nKeyness plot of urban-rural balance response content. This plot shows the words that are key for differentiating urban-rural balance open response content for likely residents of council district 12 versus all other council districts in Lexington/Fayette County.\n\n\n\n\n\n\nResults\nThis keyness plot shows words or phrases that respondents who are likely residents of council district 12 used more often in comparison to respondents who are likely residents of all other council districts combined. The words and phrases plotted in blue are the key differentiating terms for likely council district 12 urban-rural balance open responses, while the words plotted in grey represent the key differential words for the same responses for likely residents of all other council districts combined."
  }
]